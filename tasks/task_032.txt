# Task ID: 32
# Title: Integrate Unlayer Email Editor
# Status: in-progress
# Dependencies: 31
# Priority: high
# Description: Replace the current TipTap-based email editor with Unlayer's react-email-editor to provide a professional, drag-and-drop email template editing experience for non-technical admin users.
# Details:
Context: Our current email template editing solution has several limitations (Not truly WYSIWYG, limited components, requires HTML knowledge, no proper preview, error-prone saving/previewing). Unlayer provides a professional solution with drag-and-drop capabilities, responsive templates, and real-time previews.
Implementation Details:
1. Installation and Setup: Install react-email-editor, create EmailEditor wrapper, configure branding.
2. API Enhancement: Update API to store HTML & design JSON, add design field to schema, improve version management.
3. User Interface: Replace TipTap with Unlayer, update management screens, create template gallery.
4. Migration: Convert existing HTML templates (Note: Build notes indicate creating *new* templates instead of migrating existing ones - this needs clarification).
Technical Notes: Package: react-email-editor, iframe-based (check CSP), store design JSON with HTML.
Resources: Unlayer Docs, react-email-editor GitHub, Unlayer templates examples.

# Test Strategy:
Verify Unlayer editor integrated; templates can be created/edited/saved via drag-and-drop; HTML & design JSON stored; variable substitution (merge tags) works; templates can be previewed across devices/clients; version history and rollback functionality is preserved. (Migration of existing templates needs clarification based on conflicting information: task file says migrate, build note says create new).

# Subtasks:
## 1. Create Additional Standard Email Template Types with Unlayer [cancelled]
### Dependencies: None
### Description: Design and implement a set of standard, well-designed email templates using the Unlayer editor for common use cases.
### Details:
Specific template types to create:
- Newsletter templates (e.g., monthly updates, featured content)
- Announcement templates (e.g., new features, important notices)
- Marketing campaign templates (e.g., promotions, special offers)
- Course enrollment templates (e.g., confirmation, pre-course information, reminders)
Ensure all templates are responsive, align with Graceful Homeschooling branding, and utilize Unlayer's features effectively.
<info added on 2025-05-08T06:39:11.250Z>
Specific template types to create:
- Newsletter templates (e.g., monthly updates, featured content)
- Announcement templates (e.g., new features, important notices)
- Marketing campaign templates (e.g., promotions, special offers)
- Course enrollment templates (e.g., confirmation, pre-course information, reminders)
Ensure all templates are responsive, align with Graceful Homeschooling branding, and utilize Unlayer's features effectively.

This subtask has been cancelled in its current location. The work has been moved and is now being tracked as Subtask 34.2 under 'Phase 1: Solidify Core Email Infrastructure (Postmark & Unlayer)' (Task 34). Please refer to Task 34.2 for all future updates and implementation details regarding the creation of standard email templates.
</info added on 2025-05-08T06:39:11.250Z>

## 2. Implement Enhanced Template Management Features (Delete, Rename, Duplicate) [cancelled]
### Dependencies: None
### Description: Enhance the Unlayer template management interface with core CRUD operations.
### Details:
Implement the following functionalities for email templates managed via Unlayer:
- Ability to delete templates (with confirmation).
- Ability to rename existing templates.
- Template duplication functionality to allow admins to quickly create new templates based on existing ones.
Ensure these operations correctly handle both the HTML and design JSON stored for each template, and interact correctly with any version history.
<info added on 2025-05-08T06:39:27.692Z>
Implement the following functionalities for email templates managed via Unlayer:
- Ability to delete templates (with confirmation).
- Ability to rename existing templates.
- Template duplication functionality to allow admins to quickly create new templates based on existing ones.
Ensure these operations correctly handle both the HTML and design JSON stored for each template, and interact correctly with any version history.

This subtask has been moved and is now tracked as Subtask 34.3 under 'Phase 1: Solidify Core Email Infrastructure (Postmark & Unlayer)' (Task 34). The work will continue there with the same requirements and specifications. This subtask is now cancelled in the current location.
</info added on 2025-05-08T06:39:27.692Z>

## 3. Conduct Comprehensive Email Client Testing for Unlayer Templates [cancelled]
### Dependencies: None
### Description: Thoroughly test all email templates created with Unlayer across a wide range of email clients and devices.
### Details:
Testing scope includes:
- Major desktop clients (Outlook, Apple Mail, Thunderbird).
- Major webmail clients (Gmail, Outlook.com, Yahoo Mail).
- Major mobile clients (iOS Mail, Android Gmail, Outlook Mobile).
- Verify responsive design and correct rendering of all Unlayer components and custom branding.
- Use tools like Email on Acid or Litmus for broader compatibility checks if available.
- Document any rendering issues and address them by adjusting templates or Unlayer configurations.
<info added on 2025-05-08T06:39:51.209Z>
Testing scope includes:
- Major desktop clients (Outlook, Apple Mail, Thunderbird).
- Major webmail clients (Gmail, Outlook.com, Yahoo Mail).
- Major mobile clients (iOS Mail, Android Gmail, Outlook Mobile).
- Verify responsive design and correct rendering of all Unlayer components and custom branding.
- Use tools like Email on Acid or Litmus for broader compatibility checks if available.
- Document any rendering issues and address them by adjusting templates or Unlayer configurations.

This subtask has been relocated and is now being tracked as Subtask 34.4 under 'Phase 1: Solidify Core Email Infrastructure (Postmark & Unlayer)' (Task 34). All testing activities and documentation should be continued under the new subtask. This subtask is now cancelled in its current location.
</info added on 2025-05-08T06:39:51.209Z>

## 4. Train Admin Users on Unlayer Email Editor [pending]
### Dependencies: None
### Description: Provide training to administrative staff on how to use the new Unlayer email editor.
### Details:
Training should cover:
- Overview of the Unlayer interface and its features.
- Creating new templates from scratch or using pre-designed starting points.
- Using drag-and-drop components.
- Customizing template styles and branding.
- Adding and managing personalization merge tags.
- Previewing templates on different devices.
- Saving, loading, and managing template versions.
- Best practices for creating effective and responsive emails.
- Develop training materials (e.g., guides, video tutorials) if necessary.

## 5. Document New Unlayer Template Creation Process [pending]
### Dependencies: None
### Description: Create comprehensive documentation for the content team and administrators on the new email template creation and management process using Unlayer.
### Details:
Documentation should include:
- Step-by-step guide for creating, editing, and managing email templates with Unlayer.
- Explanation of available Unlayer components and features.
- Guidelines for maintaining brand consistency.
- Instructions for using personalization merge tags.
- Troubleshooting common issues.
- Overview of the template approval and publishing workflow (if any).
- Links to Unlayer's own documentation for advanced features.

